Click on the square to randomize the plate's temperature.
<br />
<canvas id="plate" width="300" height="300" style="border:1px solid #000000;"></canvas>
<script>
var requestAnimationFrame = window.requestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.msRequestAnimationFrame;

var n = 0;
var rows = 100;
var columns = 100;
var c = 0;
var i1, i2, j1, j2;

var plateCanvas = document.getElementById("plate");
plateCanvas.addEventListener("mousedown", doMouseDown, false);

var plateContext = plateCanvas.getContext("2d");
var color = ["#000000", "#ffffff", "#000000", "#ffffff", "#000000", "#ffffff", "#000000", "#ffffff", "#000000", "#ffffff", "#000000", "#ffffff", "#000000", "#ffffff", "#000000", "#ffffff", "#000000", "#ffffff", "#FF66CC", "#ffffff"];
var color1 = ["#6599FF", "#00ff00", "#6599FF", "#00ff00", "#6599FF", "#00ff00", "#6599FF", "#00ff00", "#6599FF", "#00ff00"];
var index;

var temperature = new Array();
var tao = .25;
var maxTemp = 1000;
var hiTemp;
var loTemp;
var range;

function drawHeat() {
    //plateCanvas.height = rows;
    //plateCanvas.width = columns;

    if (n == 0)
        for (var i = 0; i < rows; i++) {
            temperature[i] = new Array();
            for (var j = 0; j < columns; j++) {
                temperature[i][j] = Math.random() * maxTemp;
            }
        }

    if (n == 1) {
        hiTemp = 0;
        loTemp = maxTemp;

        for (var i = 0; i < rows; i++)
            for (var j = 0; j < columns; j++) {
                if (temperature[i][j] > hiTemp)
                    hiTemp = temperature[i][j];

                if (temperature[i][j] < loTemp)
                    loTemp = temperature[i][j];

                range = hiTemp - loTemp;
            }
    }

    for (var i = 0; i < rows; i++) {
        i1 = i - 1;
        i2 = i + 1;

        if (i == 0)
            i1 = rows - 1;

        if (i == rows - 1)
            i2 = 0;

        for (var j = 0; j < columns; j++) {
            j1 = j - 1;
            j2 = j + 1;

            if (j == 0)
                j1 = columns - 1;

            if (j == columns - 1)
                j2 = 0;

            temperature[i][j] = (temperature[i1][j] + temperature[i2][j] +
                temperature[i][j1] + temperature[i][j2]) * tao + (1 - 4 * tao) * temperature[i][j];

            index = Math.floor((temperature[i][j] - loTemp) / range * 1000);

            if (true) {
                if (index % 2 == 0)
                    plateContext.fillStyle = color[0];
                else
                    plateContext.fillStyle = color[1];

                plateContext.fillRect(i * 4, j * 4, 4, 4);
            }
        }
    }

    n++;

    if (n > 1500) {
        cancelAnimationFrame(drawHeat);
        n = 0;
        c++;
    } else
        requestAnimationFrame(drawHeat);
}

function doMouseDown(event) {
    drawHeat();
}
</script>